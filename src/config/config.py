
#config_KD
import logging

logger = logging.getLogger("config")

CAMERA_URLS = [
    # "rtsp://admin:Soncave1!@192.168.1.27:554/streaming/channels/101",
    # "rtsp://admin:Soncave1!@192.168.1.28:554/streaming/channels/101",
    # "rtsp://admin:Soncave1!@192.168.1.29:554/streaming/channels/101",
    # "rtsp://admin:Soncave1!@192.168.1.30:554/streaming/channels/101",
    # "rtsp://admin:Soncave1!@192.168.1.31:554/streaming/channels/101"
    # "rtsp://admin:admin@192.168.0.113:8554/live"
    # "rtsp://admin:admin@166.13.151.65:8554/live"
    "rtsp://admin:SPtech2024@192.168.50.13:554/Streaming/Channels/101",
    "rtsp://admin:SPtech2024@192.168.50.4:554/Streaming/Channels/101",
    "rtsp://admin:SPtech2024@192.168.50.14:554/Streaming/Channels/101",
    "rtsp://admin:SPtech2024@192.168.50.27:554/Streaming/Channels/101",
    "rtsp://admin:SPtech2024@192.168.50.36:554/Streaming/Channels/101",
    "rtsp://admin:SPtech2024@192.168.50.35:554/Streaming/Channels/101",
    "rtsp://admin:SPtech2024@192.168.50.31:554/Streaming/Channels/101",
    "rtsp://admin:SPtech2024@192.168.50.19:554/Streaming/Channels/101",

]

BOUNDING_BOXES = [
    {
        "starts": [[359, 275, 488, 438]],
        "ends": [[304, 241, 497, 336]]
    },
    {
        "starts": [[537, 270, 681, 441]],
        "ends": [[430, 152, 635, 265]]
    },
    {
        "starts": [[741, 260, 881, 438]],
        "ends": [[443, 190, 609, 298]]
    },
    {
        "starts": [[281, 251, 400, 418]],
        "ends": [[395, 330, 600, 422]]
    },
    {
        "starts": [[472, 256, 601, 407]],
        "ends": [[638, 390, 829, 499]]
    },
    {
        "starts": [[679, 255, 796, 406]],
        "ends": [[653, 351, 821, 446]]
    },
    {
        "starts": [[869, 243, 982, 407]],
        "ends": [[653, 294, 813, 402]]
    },
    {
        "starts": [[253, 174, 361, 315]],
        "ends": [[663, 337, 860, 424]]
    },
]

BBOX_TO_TASKPATH = {
#  "283_369_400_498": "10000296",
#  "423_220_627_335": "10000292",
#  "666_222_883_341": "10000291",
#   "911_362_1025_482": "10000295",
#   "406_351_599_475": "10000289",
#   "641_358_849_480": "10000288",
#   "888_504_993_618": "10000294",
#   "428_354_634_475": "10000286",
#   "673_356_875_478": "10000300",
#   "919_501_1025_612": "10000299",
#   "422_300_620_435": "10000297",
#   "667_313_854_444": "10000285",
#   "763_386_846_487": "10000385",
   "304_241_497_336": "10000381",
#   "308_223_496_334": "10000380",
#   "186_384_296_493": "10000384",
   "430_152_635_265": "10000378",
#   "447_150_630_257": "10000377",
#   "324_312_415_418": "10000383",
   "443_190_609_298": "10000375",
#   "419_188_620_312": "10000389",
#   "294_342_412_463": "10000388",
   "395_330_600_422": "10000386",
#   "387_324_629_439": "10000374",
#   "293_526_392_631": "10000350",
   "638_390_829_499": "10000346",
#   "646_394_832_493": "10000345",
#   "865_529_948_637": "10000349",
   "653_351_821_446": "10000343",
#   "632_347_828_457": "10000342",
#   "852_482_938_592": "10000348",
   "653_294_813_402": "10000340",
#   "646_299_826_403": "10000354",
#   "856_436_933_545": "10000353",
   "663_337_860_424": "10000351",
#   "654_324_848_428": "10000339",
#   "273_286_373_419": "10000470",
   "652_398_865_492": "10000465",
   "653_473_842_576": "10000467",
#   "644_485_848_583": "10000466",
#   "885_276_999_409": "10000469",
#   "929_226_1046_346": "10000078",
#   "699_428_880_546": "10000074",
#   "442_434_635_545": "10000073",
#   "295_261_395_380": "10000077",
#   "699_512_875_609": "10000071",
#   "438_503_636_620": "10000070",
#   "291_310_392_425": "10000076",
#   "660_456_831_573": "10000068",
#   "391_432_602_575": "10000082",
#   "273_242_364_366": "10000081",
#   "691_491_897_598": "10000079",
#   "431_486_645_595": "10000067",
#   "881_589_999_683": "10000045",
#   "751_351_862_548": "10000041",
#   "751_121_869_308": "10000040",
#   "921_557_1040_657": "10000044",
#   "784_333_906_536": "10000038",
#   "775_93_901_292": "10000037",
#   "935_597_1040_691": "10000043",
#   "827_358_926_558": "10000035",
#   "845_123_940_318": "10000049",
#   "734_89_852_295": "10000046",
#   "724_319_826_581": "10000034",
#   "841_191_980_378": "10000677",
#   "1062_211_1141_385": "10000679",
#   "930_179_1019_352": "10001109",
#   "699_165_867_339": "10000659",
#   "448_159_645_351": "10000689",
#   "254_188_418_350": "10000687",
#   "923_294_1064_459": "10000685",
#   "676_290_864_462": "10000683",
#   "439_285_643_465": "10000681",
#   "257_284_415_459": "10000679",
#   "99_299_230_449": "10000677",
   "359_275_488_438": "10000607",
   "537_270_681_441": "10000610",
   "741_260_881_438": "10000613",
   "281_251_400_418": "10000616",
   "472_256_601_407": "10000619",
   "679_255_796_406": "10000622",
   "869_243_982_407": "10000625",
   "253_174_361_315": "10000628",
   "446_152_565_299": "10000632",
   "679_145_822_303": "10000634",
   "914_148_1040_317": "10000636",
   "229_276_372_426": "10000638",
   "440_266_595_419": "10000640",
   "670_259_794_424": "10000642",
   "816_256_978_426": "10000644",
#   "249_213_345_379": "10000579",
#   "383_212_490_376": "10000581",
#   "552_214_651_369": "10000583",
#   "709_222_823_385": "10000585",
#   "872_237_947_388": "10000587",
#   "301_210_385_339": "10000589",
#   "453_195_551_336": "10000591",
#   "609_193_708_340": "10000593",
#   "773_185_880_350": "10000595",
#   "923_190_1016_363": "10001107",
#   "278_201_362_350": "10000599",
#   "437_193_542_354": "10000601"
}

START_TASK_PATHS = ["10000607", "10000610", "10000613", "10000616", "10000619", "10000622", "10000625", "10000628", "10000632", "10000634", "10000636", "10000638", "10000640", "10000642", "10000644"]
END_TASK_PATHS = ["10000381", "10000378", "10000375", "10000386", "10000346", "10000343", "10000340", "10000351", "10000465", "10000467"]

AVAILABLE_PAIRS = [{
    "starts": ["10000636"],
    "ends": ["10000381"]
},
{
    "starts": ["10000634"],
    "ends": ["10000378"]
},
{
    "starts": ["10000632"],
    "ends": ["10000375"]
},
{
    "starts": ["10000628"],
    "ends": ["10000386"]
}
]

#API_URL = "http://192.168.1.169:7000/ics/taskOrder/addTask"
#API_URL = "http://192.168.0.108:7000/ics/taskOrder/addTask"
API_URL = "http://10.250.161.134:7000/ics/taskOrder/addTask"

FRAME_SIZE = {"width": 1280, "height": 720}

def validate_config(available_pairs):
    """Validate configuration data."""
    try:
        # Validate AVAILABLE_PAIRS
        for camera_id, pairs in enumerate(available_pairs):
            for task_type in ["starts", "ends"]:
                for task_path in pairs[task_type]:
                    if task_path not in BBOX_TO_TASKPATH.values():
                        raise ValueError(f"Task path {task_path} in AVAILABLE_PAIRS[{camera_id}][{task_type}] not found in BBOX_TO_TASKPATH")
                    if task_type == "starts" and task_path not in START_TASK_PATHS:
                        raise ValueError(f"Start task path {task_path} in AVAILABLE_PAIRS not in START_TASK_PATHS")
                    if task_type == "ends" and task_path not in END_TASK_PATHS:
                        raise ValueError(f"End task path {task_path} in AVAILABLE_PAIRS not in END_TASK_PATHS")

        # Validate task paths
        for task_path in START_TASK_PATHS + END_TASK_PATHS:
            if task_path not in BBOX_TO_TASKPATH.values():
                raise ValueError(f"Task path {task_path} not found in BBOX_TO_TASKPATH")
        logger.info("Configuration validated successfully")
    except Exception as e:
        logger.error(f"Configuration validation failed: {e}")
        raise